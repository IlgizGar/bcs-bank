{% import "../../../components/icon/icon.njk" as Icon %}

{% macro input( options ) %}

  {% set data_array = '' %}
  {% set class_sep = joiner(' ') %}
  {% set data_array %}
    {% for key, value in options.data -%}
      {{ class_sep() }} data-{{ key }} = "{{ value }}"
    {%- endfor %}
  {% endset %}

  <div class="input js-input state_init {{ options.class }}" {{ data_array | safe }}>
    <label class="input__group">
      <span class="input__label js-label">{{ options.label }}</span>
      {% if options.tag === "textarea" %}
        <textarea class="input__field" rows="{{ options.rows }}"  name="{{ options.name }}" {{ options.state }}></textarea>
      {% else %}
        <input class="input__field {{ options.field }}" type="{% if options.type %}{{ options.type }}{% else %}text{% endif %}" name="{{ options.name }}" value="{{ options.value }}" {{ options.state }}>
      {% endif %}
    </label>
    {% if options.icon %}
      {{ Icon.icon({ 'name': options.icon }) }}
    {% endif %}
    {% if options.title %}
      <span class="input__title js-title">{{ options.title }}</span>
    {% endif %}
  </div>
{% endmacro %}
